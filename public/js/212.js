"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[212],{9496:(t,a,s)=>{s.d(a,{Z:()=>e});const e=function(t){return!!t&&moment(t).format("Do MMMM YYYY")}},8212:(t,a,s)=>{s.r(a),s.d(a,{default:()=>l});var e=s(9496);const i={filters:{indoDate:function(t){return(0,e.Z)(t)}},data:function(){return{pkl:{tahun_ajaran:""},selected_siswa:{agama:"",alamat:"",id:"",jenis_kelamin:"",nama:"",nis:"",nisn:"",rombel:{nama:""},rombel_id:2,tanggal_lahir:"",tempat_lahir:""},table_instansi:{rows:[],columns:[{label:"Nama Instansi / Perusahaan",field:"nama",sortable:!0},{label:"Status Kepemilikan",field:"status_kepemilikan",sortable:!0},{label:"Jenis Perusahaan",field:"jenis_perusahaan",sortable:!0},{label:"",field:"aksi",sortable:!1}],totalRows:"",serverParams:{perPage:10,searchTerm:""},perPageDropDown:[10,25,50,100],selectedRows:[]},table:{rows:[],columns:[{label:"NISN",field:"nisn"},{label:"Nama Siswa/i",field:"nama",sortable:!0},{label:"Kelas",field:"rombel.nama",sortable:!1},{label:"Status PKL",field:"pkl",sortable:!1},{label:"JK",field:"jenis_kelamin",sortable:!0},{label:"TTL",field:"ttl",sortable:!1},{label:"",field:"aksi",sortable:!1}],totalRows:"",serverParams:{perPage:10,searchTerm:""},perPageDropDown:[10,25,50,100],selectedRows:[]}}},mounted:function(){this.getPkl(),this.getSiswa(),this.getInstansi()},methods:{getInstansi:function(){var t=this;axios.get("/api/admin/instansi?dashboard=y").then((function(a){t.table_instansi.rows=a.data}))},assignSiswa:function(t){this.selected_siswa=t,$("#exampleModal").modal("show"),toastr.success(t.nama,"ok")},selectInstansi:function(t){var a=this;swal({title:"Anda menginput Siswa/i ".concat(this.selected_siswa.nama," pada ").concat(t.nama),text:"Lanjutkan?",icon:"warning",buttons:!0,dangerMode:!1}).then((function(s){if(s){$.LoadingOverlay("show");var e={siswa_id:a.selected_siswa.id,pkl_id:a.$route.params.pkl_id,instansi_id:t.id};axios.post("/api/admin/pkl/add/siswa",e).then((function(t){t.data.status?(a.getSiswa(),$("#exampleModal").modal("hide"),swal(t.data.message,"Berhasil","success")):a.error_validation=t.data.data})).then((function(){$.LoadingOverlay("hide")}))}}))},getPkl:function(){var t=this;axios.get("/api/admin/pkl/".concat(this.$route.params.pkl_id)).then((function(a){t.pkl=a.data}))},getSiswa:function(){var t=this;$.LoadingOverlay("show"),axios.get("/api/admin/pkl/get/siswa/".concat(this.$route.params.pkl_id)).then((function(a){$("#getSiswaModal").modal("show"),t.table.rows=a.data})).then((function(){$.LoadingOverlay("hide")}))}}};const l=(0,s(1900).Z)(i,(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-header"},[s("h4",{staticClass:"card-title"},[t._v("\n\t\t\t\t\t\tPenambahan Siswa pada Prakerin "+t._s(t.pkl.tahun_ajaran)+"\n\t\t\t\t\t\t"),s("br"),t._v(" "),s("small",[t._v("Menampilkan "+t._s(t.table.rows.length)+" siswa / i yang belum Prakerin")])])]),t._v(" "),s("div",{staticClass:"card-body"},[s("div",{staticClass:"table-responsive"},[s("vue-good-table",{attrs:{"search-options":{enabled:!0,trigger:"enter",skipDiacritics:!0,placeholder:"Type and enter to search"},"pagination-options":{enabled:!0},columns:t.table.columns,rows:t.table.rows,styleClass:"vgt-table condensed pgTble"},scopedSlots:t._u([{key:"table-row",fn:function(a){return["nisn"==a.column.field?s("span",[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(a.row.nisn)+"\n\t\t\t\t\t\t\t\t")]):t._e(),t._v(" "),"nama"==a.column.field?s("span",[s("router-link",{attrs:{to:{name:"admin.siswa.detail",params:{siswa_id:a.row.id}},"data-toggle":"tooltip","data-placement":"top",title:"Klik Untuk Melihat Detail "+a.row.nama}},[t._v(t._s(a.row.nama))])],1):t._e(),t._v(" "),"pkl"==a.column.field?s("span",[a.row.pkl?s("span",[s("strong",[s("i",[t._v(t._s(a.row.pkl.instansi.nama))])]),t._v(" "),s("br"),t._v(" "),s("span",{staticClass:"badge",class:{"bg-primary":"berlangsung"==a.row.pkl.status,"bg-danger":"batal"==a.row.pkl.status,"bg-success":"selesai"==a.row.pkl.status}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(a.row.pkl.pkl.status.toUpperCase())+"\n\t\t\t\t\t\t\t\t\t\t")])]):s("span",{staticClass:"badge bg-warning"},[t._v("Belum PKL")])]):t._e(),t._v(" "),"jenis_kelamin"==a.column.field?s("span",["l"==a.row.jenis_kelamin?s("span",{staticClass:"badge bg-success"},[s("i",{staticClass:"fa fa-mars"}),t._v(" L\n\t\t\t\t\t\t\t\t\t")]):s("span",{staticClass:"badge bg-danger"},[s("i",{staticClass:"fa fa-venus"}),t._v(" P\n\t\t\t\t\t\t\t\t\t")])]):t._e(),t._v(" "),"rombel.nama"==a.column.field?s("span",[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(a.row.rombel.nama)+"\n\t\t\t\t\t\t\t\t")]):t._e(),t._v(" "),"ttl"==a.column.field?s("span",[s("i",[t._v(t._s(a.row.tempat_lahir))]),t._v("\n\t\t\t\t\t\t\t\t\t, "+t._s(t._f("indoDate")(a.row.tanggal_lahir))+"\n\t\t\t\t\t\t\t\t")]):t._e(),t._v(" "),"aksi"==a.column.field?s("span",[s("span",{staticClass:"badge bg-primary pointer",on:{click:function(s){return t.assignSiswa(a.row)}}},[s("i",{staticClass:"fa fa-plus"}),t._v(" Tambah")])]):t._e()]}}])})],1)])])])]),t._v(" "),s("div",{staticClass:"modal fade",attrs:{id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog modal-xl"},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v("Penempatan Instansi untuk Siswa/i "+t._s(t.selected_siswa.nama)+" pada Tahun Ajaran "+t._s(t.pkl.tahun_ajaran)+" ")]),t._v(" "),s("button",{staticClass:"btn-close",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"}})]),t._v(" "),s("div",{staticClass:"modal-body"},[s("div",{staticClass:"alert alert-primary"},[s("div",{staticClass:"alert-body"},[s("div",{staticClass:"table-responsive"},[s("table",[s("tr",[s("td",{staticStyle:{width:"160px"}},[t._v("Nama")]),t._v(" "),s("td",{staticStyle:{width:"20px"}},[t._v(":")]),t._v(" "),s("td",[t._v(t._s(t.selected_siswa.nama))])]),t._v(" "),s("tr",[s("td",{staticStyle:{width:"160px"}},[t._v("Kelas")]),t._v(" "),s("td",{staticStyle:{width:"20px"}},[t._v(":")]),t._v(" "),s("td",[t._v(t._s(t.selected_siswa.rombel.nama))])]),t._v(" "),s("tr",[s("td",{staticStyle:{width:"160px"}},[t._v("TTL")]),t._v(" "),s("td",{staticStyle:{width:"20px"}},[t._v(":")]),t._v(" "),s("td",[t._v(t._s(t.selected_siswa.tempat_lahir)+", "+t._s(t._f("indoDate")(t.selected_siswa.tanggal_lahir)))])]),t._v(" "),s("tr",[s("td",{staticStyle:{width:"160px"}},[t._v("Alamat")]),t._v(" "),s("td",{staticStyle:{width:"20px"}},[t._v(":")]),t._v(" "),s("td",[t._v(t._s(t.selected_siswa.alamat))])])])])])]),t._v(" "),s("div",{staticClass:"table-responsive"},[s("vue-good-table",{attrs:{"search-options":{enabled:!0,trigger:"enter",skipDiacritics:!0,placeholder:"Type and enter to search"},mode:"remote",totalRows:t.table_instansi.rows.length,"pagination-options":{enabled:!0},columns:t.table_instansi.columns,rows:t.table_instansi.rows,styleClass:"vgt-table condensed pgTble"},scopedSlots:t._u([{key:"table-row",fn:function(a){return["aksi"==a.column.field?s("span",[s("span",{staticClass:"pointer badge bg-primary pointer",on:{click:function(s){return t.selectInstansi(a.row)}}},[s("i",{staticClass:"fa fa-check"}),t._v(" Pilih\n\t\t\t\t\t\t\t\t\t")])]):t._e()]}}])})],1)])])])])])}),[],!1,null,null,null).exports}}]);